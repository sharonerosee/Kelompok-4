<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>main KUY!</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid">
            <a id="logo" class="navbar-brand" onclick="refreshSite()" target="_blank">
                <img src="img/header-1.png" width="100px" class="img-fluid" />
            </a>
            <button class="navbar-toggler" type="button" 
                data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" 
                aria-controls="navbarSupportedContent" 
                aria-expanded="false" 
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="menu collapse navbar-collapse" id="navbarSupportedContent">
                <ul class=" navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="mar nav-item">
                        <a class="nav-link" href="#bungkus">Home</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                          About
                        </a>
                        <ul class="dropdown-menu">
                          <li><a class="dropdown-item" href="#aboutss">Our Teams</a></li>
                          <li><a class="dropdown-item" href="#references">References</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#hows">How to Play</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div id="bungkus">     
        <section id="parallax" class="intro">
            <div id="bungkuss">
                <div id="home" class="filter">
                    <h1><b>Welcome to Idle</b>Clicker</h1>
                    <h5>It's all about click</h5>
                    <p>click terus sampe mampus</p>
                    <button class="btn btn-1" onclick="gameStart()">PLAY</button>
                </div>
                <div id="tombol" class="row d-none" style="z-index: 1" >
                    <div class="avatar">
                        <div id="money">
                            <h1><span id="timeAsep"></span></h1>
                            <h1>Money: <span id="point"></span></h1>
                            <h1><span id="statusBuy"></span></h1>
                            <img id="gambar" onclick="buttonClick()" width="400px" src="img/Miner.gif">
                        </div>
            
                    </div>
                    <div class="upgrade col-12 col-lg-4 col-md-12">
                        <div class="isi">
                            <h3>Enhancer</h3>
                            <div class="item-container row">
                            <button onclick="upgradeClicks(`${id}`)" id="copper0" class="hi col-12 col-lg-7 col-md-12">Enhance Copper Ores</button> 
                            <p class="col-12 col-lg-5 col-md-12"><span id="copper0-level"></span> - <span id="copper0-cost"></span></p>
                            </div>
                            <br/>
                            <div class="item-container row">
                            <button onclick="upgradeClicks(`${id}`)" id="silver0" class="hi col-12 col-lg-7 col-md-12">Enhance Silver Ores</button> 
                            <p class="col-12 col-lg-5 col-md-12"><span id="silver0-level"></span> - <span id="silver0-cost"></span></p>
                            </div>
                            <br/>
                            <div class="item-container row">
                            <button onclick="upgradeClicks(`${id}`)" id="gold0" class="hi col-12 col-lg-7 col-md-12">Enhance Gold Ores</button> 
                            <p class="col-12 col-lg-5 col-md-12"><span id="gold0-level"></span> - <span id="gold0-cost"></span></p>
                            </div>
                        </div>
                    </div>
                    <div class="upgrade col-12 col-lg-4 col-md-12">
                        <div class="isi">
                            <h3>Automatic Machine</h3>
                            <p class="col-12 col-lg-12 col-md-12">Total Active Machine: <span id="totalfactory"></span></p>
                            <div id="button-row" class="item-container row">
                                <button onclick="upgradeAuto(`${id}`)" id="factory1-buy">Buy - Automatic Drill</button>
                                <button onclick="upgradeAuto(`${id}`)" id="factory1-upgrade" class="d-none">
                                    <span id="factory1-text"></span>
                                </button>
                                <p class="col-12 col-lg-5 col-md-12"><span id="factory1-level"></span> - <span id="factory1-cost"></span></p>
                            </div>
                            <div id="button-row" class="item-container row">
                                <button onclick="upgradeAuto(`${id}`)" id="factory2-buy">Buy - Conveyer Belts</button>
                                <button onclick="upgradeAuto(`${id}`)" id="factory2-upgrade" class="d-none">
                                    <span id="factory2-text"></span>
                                </button>
                                <p class="col-12 col-lg-5 col-md-12"><span id="factory2-level"></span> - <span id="factory2-cost"></span></p>
                            </div>
                            <div id="button-row" class="item-container row">
                                <button onclick="upgradeAuto(`${id}`)" id="factory3-buy">Buy - Ore Washer</button>
                                <button onclick="upgradeAuto(`${id}`)" id="factory3-upgrade" class="d-none">
                                    <span id="factory3-text"></span>
                                </button>
                                <p class="col-12 col-lg-5 col-md-12"><span id="factory3-level"></span> - <span id="factory3-cost"></span></p>
                            </div>
                        </div>
                    </div>
                    <div class="upgrade col-12 col-lg-4 col-md-12">
                        <div class="isi">
                            <h3>Open District</h3>
                            <p class="col-12 col-lg-12 col-md-12">Total District: <span id="district-total"></span></p>
                            <p class="col-12 col-lg-12 col-md-12">Cost: <span id="district-cost"></p>
                            <button onclick="upgradeDistrict()">Build District</button> 
                    </div>
        
                </div>
            </div>
        </section>
        
        <section id="hows">
            <div class="top how">
                <div class="tes">

                    <div id="howtoplay">
                        <h1>How to Play?<span class="import badge bg-danger ms-4 text-center">Important!</span></h1>
                    </div>
                    <div id="sub" class="mt-4">
                        <p> Klik karakternya sebanyak mungkin.<br>
                            Makin banyak klik, makin banyak money.<br>
                            Money bisa digunakan untuk shop.<br>
                            Shop digunakan untuk upgrade karakter agar makin banyak uang yang terkumpul.
                        </p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="aboutss" class="abouts">
            <div class="top">
                <div class="header">
                    <h1>Our Team</h1>
                </div>
                <div class="sub-container row">
                    <div class="teams col-12 col-lg-6 col-md-12">
                    <img src="svg/ewing.jpg" alt="realm">
                    <div class="teams-hover-text">
                        <h3>Edwin Fedora Lolo</h3>
                        <h4>Developer</h4>
                        <center>
                        <p>Mahasiswa Universitas Multimedia Nusantara Jurusan Informatika Angkatan 2022. </p>
                        </center>
                    </div>
                    <div class="teams-white1 teams-text">
                        <p>Edwin Fedora Lolo</p>
                        <a href="https://www.instagram.com/edwinflolo/" target="_blank">@Edwin</a>
                    </div>
                    </div>
                    
                    <div class="teams col-12 col-lg-6 col-md-12">
                        <img src="svg/gilbert.jpg" alt="realm">
                        <div class="teams-hover-text">
                            <h3>Gilbert Evan Tilung</h3>
                            <h4>Developer</h4>
                            <center>
                            <p>Mahasiswa Universitas Multimedia Nusantara Jurusan Informatika Angkatan 2022. </p>
                            </center>
                        </div>
                        <div class="teams-white2 teams-text">
                            <p>Gilbert Evan Tilung</p>
                            <a href="https://www.instagram.com/gdstargazed/" target="_blank">@Gilbert</a>
                        </div>
                    </div>
                    
                    <div class="teams col-12 col-lg-6 col-md-12">
                        <img src="svg/rapael.jpg" alt="realm">
                        <div class="teams-hover-text">
                        <h3>Raphael Constantine Kurniajaya</h3>
                        <h4>Developer</h4>
                        <center>
                        <p>Mahasiswa Universitas Multimedia Nusantara Jurusan Informatika Angkatan 2022. </p>
                        </center>
                        </div>
                        <div class="teams-white3 teams-text">
                        <p>Raphael Constantine Kurniajaya</p>
                        <a href="https://www.instagram.com/raphael.ck/" target="_blank">@Raphael</a>
                        </div>
                    </div>
                    
                        <div class="teams col-12 col-lg-6 col-md-12">
                        <img src="svg/sarun.jpg" alt="realm">
                        <div class="teams-hover-text">
                        <h3>Sharone Angelica Jovans</h3>
                        <h4>Developer</h4>
                        <center>
                        <p>Mahasiswa Universitas Multimedia Nusantara Jurusan Informatika Angkatan 2022. </p>
                        </center>
                    </div>
                    <div class="teams-white4 teams-text">
                        <p>Sharone Angelica Jovans</p>
                        <a href="https://www.instagram.com/sharangelica/" target="_blank">@Sharone</a>
                    </div>
                    </div>
                </div>
                
        </section>

        <div id="references">
            <center>
                <div class="header1">
                    <h1>References</h1>
                </div>
                <br>
                
                <div class="alert alert-primary" role="alert">
                    <a href="https://codepen.io/684386/pen/VaYqKY" target="_blank" class="alert-link">Idle Click Game</a>
                </div>
                <div class="alert alert-secondary" role="alert">
                    <a href="https://www.youtube.com/watch?v=OvRL3PljUuI&t=174s" target="_blank" class="alert-link">Color Filter</a>
                </div>
                <div class="alert alert-success" role="alert">
                    <a href="https://www.youtube.com/watch?v=0FrqCNU1krI" target="_blank" class="alert-link">Parallax Image</a>
                </div>
                <div class="alert alert-danger" role="alert">
                <a href="https://codepen.io/maheshambure21/pen/QwXaRw" target="_blank" class="alert-link">Navbar1</a>
                </div>
                <div class="alert alert-info" role="alert">
                    <a href="https://getbootstrap.com/docs/5.3/components/alerts/" target="_blank" class="alert-link">Navbar2</a>
                </div>
                <div class="alert alert-warning" role="alert">
                    <a href="https://getbootstrap.com/docs/5.3/components/navbar/" target="_blank" class="alert-link">Navbar3</a>
                </div>
                <div class="alert alert-dark" role="alert">
                    <a href="https://codepen.io/sharonerosee/pen/XWxrxve" target="_blank" class="alert-link">About Us</a>
                </div>
            </center>
        </div>
        

            </div>
        <section class="footer img-fluid">
            <div class="foot">

                <img src="img/logoumn.png" width="90px">
            </div>
        </section>
        
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script>
        let score = 1000;
        let totalFactory = 0;
        let clickMultiplier = 1;
        let districtMultiplier = 1;
        let districtCost = 350;
        let currLevel;
        let upgradeShopList = [
            {name: 'Copper Driller', id: '#copper0', cost: 100, level: 0, multi1: 1, multi2: 2, multi3: 4, multi4: 5, multi5: 7},
            {name: 'Silver', id: '#silver0', cost: 150, level: 0, multi1: 1, multi2: 3, multi3: 5, multi4: 7, multi5: 10},
            {name: 'Gold', id: '#gold0', cost: 200, level: 0, multi1: 2, multi2: 5, multi3: 8, multi4: 10, multi5: 15}
        ];
        let upgradeAutoList = [
            {id: '#factory1', cost: 275, status: false, level: 0, multi1: 5, multi2: 10, multi3: 15, time1: 5.5, time2: 3.5, time3: 1.5, interval: null}, //First Factory
            {id: '#factory2', cost: 300, status: false, level: 0, multi1: 5, multi2: 10, multi3: 15, time1: 5.5, time2: 3.5, time3: 1.5, interval: null}, //second factory
            {id: '#factory3', cost: 315, status: false, level: 0, multi1: 5, multi2: 10, multi3: 15, time1: 5.5, time2: 3.5, time3: 1.5, interval: null} //third factory
        ];
        let nameAutoList = [
            {level1: 'Drills', level2: 'Laser Drills', level3: 'Delta-Laser Drills'},    
            {level1: 'Conveyer Belts', level2: 'High-speed Conveyer Belts', level3: ' Transportation Tube'},
            {level1: 'Ore Washers', level2: 'Laser Ore Cleaner', level3: 'Purifier & Enhancer MK.II'}
        ]

        function refreshSite(){
            window.location.reload();
        }

        //game start
        function gameStart(){
            // getTime();
            $('#home').addClass('d-none');
            $('#tombol').removeClass('d-none');
            $('#totalfactory').html(`${totalFactory}`);
            setInterval(getTime(), 60000);
            for(i=0; i<upgradeShopList.length; i++){
                $(`${upgradeShopList[i].id}-level`).html(`Buy (+${upgradeShopList[i].multi1})`);
                $(`${upgradeShopList[i].id}-cost`).html(upgradeShopList[i].cost);
            }
            for(i=0; i<upgradeAutoList.length; i++){
                $(`${upgradeAutoList[i].id}-level`).html(`Buy (+${upgradeAutoList[i].multi1})`);
                $(`${upgradeAutoList[i].id}-cost`).html(upgradeAutoList[i].cost);
            }
            $('#district-total').html(districtMultiplier-1);
            $('#district-cost').html(districtCost);
            $('#point').html(score);
            
            var homeDiv = document.getElementById("parallax");
            homeDiv.style.height = "auto";
        }

        //avatar clicks
        function buttonClick(){
            score += clickMultiplier;
            expandImage();
            $('#point').html(score);
        }

        function expandImage(){
            $('#gambar').css('width', '410px');
            setTimeout(function(){
                $('#gambar').css('width', '400px');
            }, 100);
        }

        function upgradeDistrict(){
            if(score >= districtCost){
                score -= districtCost;
                districtMultiplier++;
                districtCost = districtCost*3;
                $('#point').html(score);
                $('#district-total').html(districtMultiplier-1);
                $('#district-cost').html(districtCost);
                for(i=0; i<upgradeAutoList.length; i++){
                    if(upgradeAutoList[i].interval != null){
                        clearInterval(upgradeAutoList[i].interval);
                            upgradeAutoList[i].interval = setInterval(function(){
                            score += currLevel*districtMultiplier;
                            $('#point').html(score);
                        }, upgradeAutoList[i]['time' + upgradeAutoList[i].level]*1000)
                    }
                }
            }else if(districtCost == districtCost*(3^3)){
                $('#statusBuy').html('Maximum District Reached!');
                setTimeout(function(){
                    $('#statusBuy').html('');
                }, 3000);
            }else{
                $('#statusBuy').html('Not Enough Money!');
                setTimeout(function(){
                    $('#statusBuy').html('');
                }, 3000);
            }
        }

        function upgradeAuto(idReceive2){
            for(i=0; i<upgradeAutoList.length; i++){
                if(`${upgradeAutoList[i].id}-buy` === `#${idReceive2}` || `${upgradeAutoList[i].id}-upgrade` === `#${idReceive2}`){
                    if(score >= upgradeAutoList[i].cost && upgradeAutoList[i].level < 3){
                        $(`${upgradeAutoList[i].id}-buy`).addClass('d-none');
                        $(`${upgradeAutoList[i].id}-upgrade`).removeClass('d-none');
                        if(`${upgradeAutoList[i].id}-buy` === `#${idReceive2}`){
                            totalFactory++;
                            $('#totalfactory').html(totalFactory);
                        }

                        score -= upgradeAutoList[i].cost;
                        $('#point').html(score);

                        upgradeAutoList[i].level++;
                        upgradeAutoList[i].cost = upgradeAutoList[i].cost*3;
                        let nextLevel = upgradeAutoList[i].level + 1;
                        let tempName;
                        if(nextLevel > 3) tempName = 'Maxed (' + nameAutoList[i].level1 + ')';
                        else tempName = nameAutoList[i]['level' + nextLevel];
                        currLevel = upgradeAutoList[i]['multi' + upgradeAutoList[i].level];
                        
                        $(`${upgradeAutoList[i].id}-text`).html('Upgrade ' + tempName);
                        if(nextLevel > 3){
                            $(`${upgradeAutoList[i].id}-level`).html(``);
                            $(`${upgradeAutoList[i].id}-cost`).html('');
                        }else{
                            $(`${upgradeAutoList[i].id}-level`).html(`Lv.${nextLevel} (+${upgradeShopList[i]['multi'+ nextLevel]})`);
                            $(`${upgradeAutoList[i].id}-cost`).html(upgradeAutoList[i].cost);
                        }
                        clearInterval(upgradeAutoList[i].interval);
                        upgradeAutoList[i].interval = setInterval(function(){
                            score += currLevel*districtMultiplier;
                            $('#point').html(score);
                        }, upgradeAutoList[i]['time' + upgradeAutoList[i].level]*1000)
                    }else if(upgradeAutoList[i].level == 3){
                        $('#statusBuy').html(`${nameAutoList[i].level1} are already at Max Level!`);
                        setTimeout(function(){
                            $('#statusBuy').html('');
                        }, 3000);
                    }else{
                        $('#statusBuy').html('Not Enough Money!');
                        setTimeout(function(){
                            $('#statusBuy').html('');
                        }, 3000);
                    }
                }
            }
        }

        function upgradeClicks(idReceive){
            for(i=0; i<upgradeShopList.length; i++){
                if(upgradeShopList[i].id === `#${idReceive}`){
                    if(score >= upgradeShopList[i].cost && upgradeShopList[i].level < 5){
                        score -= upgradeShopList[i].cost;
                        upgradeShopList[i].level++;
                        let tempLevel = upgradeShopList[i].level + 1;
                        clickMultiplier += upgradeShopList[i]['multi' + upgradeShopList[i].level];
                        console.log(clickMultiplier);
                        upgradeShopList[i].cost = upgradeShopList[i].cost * 2;
                        $('#point').html(score);
                        if(tempLevel > 5){
                            $(`${upgradeShopList[i].id}-level`).html(`Max Level`);
                            $(`#${idReceive}-cost`).html('');
                        }else{
                            $(`${upgradeShopList[i].id}-level`).html(`Lv.${tempLevel} (+${upgradeShopList[i]['multi'+ tempLevel]})`);
                            $(`#${idReceive}-cost`).html(upgradeShopList[i].cost);
                        }
                    }else if(upgradeShopList[i].level == 5){
                        $('#statusBuy').html(`${upgradeShopList[i].name} is already at Max Level!`);
                        setTimeout(function(){
                            $('#statusBuy').html('');
                        }, 3000);
                    }else{
                        $('#statusBuy').html('Not Enough Money!');
                        setTimeout(function(){
                            $('#statusBuy').html('');
                        }, 3000);
                    }
                    break;
                    
                }
            }
        }

        function getTime(){
            let hour = new Date().getHours();
            let minute = new Date().getMinutes();
            //update: salam
            if(hour >= 4 && hour <= 10) document.getElementById('timeAsep').innerHTML = `Good Morning`;
            else if(hour >= 11 && hour <= 15) document.getElementById('timeAsep').innerHTML =  `Good Afternoon`;
            else if(hour >= 16 && hour <= 19) document.getElementById('timeAsep').innerHTML =  `Good Evening`;
            else if(hour >= 20) document.getElementById('timeAsep').innerHTML = `Good Night`;
            else if(hour <= 3) document.getElementById('timeAsep').innerHTML = `Good Night`;
        }
    </script>
</body>
</html>